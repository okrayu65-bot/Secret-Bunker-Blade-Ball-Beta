-- Secret Bunker (BETA) Blade Ball Script
-- Allusive UI powered, Credits to Rayu ü§ì

-- Load Allusive Library
local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/WarpProjectByMe/Abuzet/refs/heads/main/NEVERMISS"))()
local UI = Library.new()
UI:load()

-- Combat Tab
local CombatTab = UI:create_tab("Combat‚öîÔ∏è", "rbxassetid://90319103293063")
local AutoParryModule = CombatTab:create_module({
    title = "Auto Parry",
    description = "Automatically parry the ball when it approaches.",
    section = "left",
    flag = "auto_parry",
    callback = function(state)
        _G.SecretBunker_AutoParry = state
        if state then
            print("Auto Parry Enabled")
        else
            print("Auto Parry Disabled")
        end
    end
})
AutoParryModule:create_checkbox({
    title = "Enable Auto Parry",
    flag = "enable_auto_parry",
    callback = function(val)
        _G.SecretBunker_AutoParry = val
    end
})

-- Auto Spam Module
local AutoSpamModule = CombatTab:create_module({
    title = "Auto Spam",
    description = "Auto spam parry/clash when ball keeps moving between players.",
    section = "left",
    flag = "auto_spam",
    callback = function(state)
        _G.SecretBunker_AutoSpam = state
        if state then
            print("Auto Spam Enabled")
        else
            print("Auto Spam Disabled")
        end
    end
})
AutoSpamModule:create_checkbox({
    title = "Enable Auto Spam",
    flag = "enable_auto_spam",
    callback = function(val)
        _G.SecretBunker_AutoSpam = val
    end
})

-- Manual Spam Module
local ManualSpamModule = CombatTab:create_module({
    title = "Manual Spam",
    description = "UI on screen, click to spam parry like OP auto clicker.",
    section = "right",
    flag = "manual_spam",
    callback = function(state)
        _G.SecretBunker_ManualSpam = state
        if state then
            print("Manual Spam Enabled")
        else
            print("Manual Spam Disabled")
        end
    end
})
ManualSpamModule:create_checkbox({
    title = "Enable Manual Spam (OP Clicker)",
    flag = "enable_manual_spam",
    callback = function(val)
        _G.SecretBunker_ManualSpam = val
    end
})

-- Manual Spam UI Button
local manualSpamButton
manualSpamButton = ManualSpamModule:create_button({
    title = "Spam Now!",
    flag = "manual_spam_btn",
    callback = function()
        _G.SecretBunker_ManualSpam = not _G.SecretBunker_ManualSpam
        if _G.SecretBunker_ManualSpam then
            -- Start auto clicking
            spawn(function()
                while _G.SecretBunker_ManualSpam do
                    game:GetService("VirtualInputManager"):SendKeyEvent(true, Enum.KeyCode.E, false, game)
                    wait(0.05)
                end
            end)
            manualSpamButton:set_title("Spam ON (Click to stop)")
        else
            manualSpamButton:set_title("Spam Now!")
        end
    end
})

-- Credits Tab
local CreditsTab = UI:create_tab("Credits", "rbxassetid://90319103293063")
CreditsTab:create_module({
    title = "Credits",
    description = "Thanks to Rayuü§ì for making this script.\nRenamed from Azure to Secret Bunker (BETA).",
    section = "left",
    flag = "credits",
    callback = function(_) end
})

-- Main Logic (Auto Parry & Auto Spam)
local function getBall()
    -- Replace with real ball detection logic for Blade Ball
    local balls = {}
    for _,v in pairs(workspace:GetDescendants()) do
        if v.Name:lower():find("ball") then
            table.insert(balls, v)
        end
    end
    return balls
end

-- Load public script for combat functions
loadstring(game:HttpGet("https://api.junkie-development.de/api/v1/luascripts/public/fdfa309e72558c6d526a1457a94a7c6f3111073ab311be1e420e64665038f238/download"))()

-- Custom Thread to handle main features
spawn(function()
    while true do
        wait(0.01)
        if _G.SecretBunker_AutoParry or _G.SecretBunker_AutoSpam then
            local balls = getBall()
            for _,ball in pairs(balls) do
                if ball and ball.Parent and ball:IsDescendantOf(workspace) and (ball.Position - game.Players.LocalPlayer.Character.HumanoidRootPart.Position).Magnitude <= 30 then
                    if _G.SecretBunker_AutoParry then
                        -- Parry key event
                        game:GetService("VirtualInputManager"):SendKeyEvent(true, Enum.KeyCode.E, false, game)
                    end
                    if _G.SecretBunker_AutoSpam then
                        for i = 1,5 do
                            game:GetService("VirtualInputManager"):SendKeyEvent(true, Enum.KeyCode.E, false, game)
                            wait(0.01)
                        end
                    end
                end
            end
        end
    end
end)

print("[Secret Bunker (BETA)] Loaded! Enjoy the Allusive UI üëΩ | Credits: Rayuü§ì")
